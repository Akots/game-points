(function(e){function t(t){for(var s,n,o=t[0],l=t[1],u=t[2],m=0,h=[];m<o.length;m++)n=o[m],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&h.push(i[n][0]),i[n]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);d&&d(t);while(h.length)h.shift()();return r.push.apply(r,u||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],s=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(s=!1)}s&&(r.splice(t--,1),e=n(n.s=a[0]))}return e}var s={},i={app:0},r=[];function n(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=s,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(a,s,function(t){return e[t]}.bind(null,s));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="game-points/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var d=l;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var s=a("85ec"),i=a.n(s);i.a},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"game container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[e.settingsLoaded?a("user-setup",{attrs:{initialGameModes:e.gameModes,initReplay:e.showResult},on:{"start-game":e.startGame}}):e._e(),a("hr"),a("div",{staticClass:"game-board-cont"},[e.showResult?a("div",{staticClass:"status-message alert alert-primary",attrs:{role:"alert"}},[e._v(e._s(e.resultsMessage))]):e._e(),a("div",{staticClass:"game-board",class:{"game-board-locked":e.gameBoardLocked},style:e.boardSize},e._l(e.gameBoardItems,(function(t){return a("div",{key:t.id,staticClass:"game-board-cell",class:{"game-board-cell--highlight":t.highlight,"game-board-cell--win":"win"==t.state,"game-board-cell--miss":"miss"==t.state},style:e.cellSize,on:{click:function(a){return e.gameRowClick(t.id,a)}}})})),0)])],1),a("div",{staticClass:"col"},[a("leaderboard",{attrs:{initUpdate:e.updateLeaderboard}})],1)])])},r=[],n=(a("caad"),a("4fad"),a("2532"),a("3835")),o=a("bc3a"),l=a.n(o),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{staticClass:"gamer-setup form-inline"},[a("div",{staticClass:"form-group mx-sm-2 mb-2"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.userSettings,expression:"userSettings"}],staticClass:"form-control",attrs:{autofocus:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.userSettings=t.target.multiple?a:a[0]}}},[a("option",{attrs:{disabled:"",value:"null"}},[e._v("Pick game mode")]),e._l(e.gameModes,(function(t,s){return a("option",{key:s,domProps:{value:t}},[e._v(" "+e._s(t.name.replace("Mode",""))+" ")])}))],2)]),a("div",{staticClass:"form-group mx-sm-3 mb-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.userName,expression:"userName"}],staticClass:"form-control",attrs:{placeholder:"Enter your name",type:"text"},domProps:{value:e.userName},on:{input:function(t){t.target.composing||(e.userName=t.target.value)}}})]),a("button",{staticClass:"btn btn-primary mb-2",attrs:{disabled:e.disabled},on:{click:function(t){return t.preventDefault(),e.startGame(t)}}},[e._v(e._s(e.buttonName))])])},d=[],m={props:["initialGameModes","initReplay"],data:function(){return{gameModes:this.initialGameModes,disabled:!0,buttonName:"Play!",userName:"",userSettings:null}},watch:{userSettings:function(e){e&&""!=this.userName&&(this.disabled=!1)},userName:function(e){e&&null!=this.userSettings&&(this.disabled=!1)},initReplay:function(){this.initReplay&&(this.disabled=!1,this.buttonName="Replay")}},beforeMount:function(){this.setDefaultMode()},methods:{setDefaultMode:function(){for(var e=this.gameModes.length-1;e>=0;e--)if(this.gameModes[e].selected){this.userSettings=this.gameModes[e];break}},startGame:function(){var e=this.userSettings;e.userName=this.userName,this.$emit("start-game",e),this.disabled=!0}}},h=m,c=a("2877"),g=Object(c["a"])(h,u,d,!1,null,null,null),f=g.exports,p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h3",{staticClass:"mb-4"},[e._v("Leader Board")]),a("div",{staticClass:"leaderboard-table"},[a("table",{staticClass:"table"},[a("tbody",e._l(e.leadersData.slice().reverse(),(function(t){return a("tr",{key:t.id},[a("td",[e._v(e._s(t.winner))]),a("td",[e._v(e._s(t.date))])])})),0)])])])},v=[],b={props:["initUpdate"],data:function(){return{leadersData:[]}},watch:{initUpdate:function(e){1==e&&this.setData()}},mounted:function(){this.setData()},methods:{setData:function(){var e=this;l.a.get("https://starnavi-frontend-test-task.herokuapp.com/winners").then((function(t){return e.leadersData=t.data}))}}},w=b,y=Object(c["a"])(w,p,v,!1,null,null,null),P=y.exports,M={name:"app",components:{UserSetup:f,Leaderboard:P},data:function(){return{gameModes:[],settingsLoaded:!1,updateLeaderboard:!1,gameInProcess:!1,gameBoardLocked:!0,showResult:!1,resultsMessage:"",userName:"",gameBoardItems:[],gameBoardItemsNumb:25,fieldSize:5,highlightPointDelay:1500,dessapearPointDelay:3e3}},computed:{boardSize:function(){return{width:15+this.fieldSize+"rem",height:15+this.fieldSize+"rem"}},cellSize:function(){return{"flex-basis":100/this.fieldSize+"%",height:100/this.fieldSize+"%"}}},mounted:function(){var e=this,t=this;l.a.get("https://starnavi-frontend-test-task.herokuapp.com/game-settings").then((function(a){t.setGameModes(a.data),t.initGame(e.gameModes[0])}))},methods:{initGame:function(e){this.highlightPointDelay=e.mode.delay,this.dessapearPointDelay=2*e.mode.delay,this.gameBoardItemsNumb=e.mode.field*e.mode.field,this.fieldSize=e.mode.field,this.userName=e.userName||"",this.generatePointsData()},startGame:function(e){this.updateLeaderboard=!1,this.showResult=!1,this.gameBoardLocked=!1,this.gameInProcess=!0,this.initGame(e),this.renderPointsShow()},setGameModes:function(e){for(var t=Object.entries(e),a=0,s=t;a<s.length;a++){var i=Object(n["a"])(s[a],2),r=i[0],o=i[1];this.gameModes.push({name:r,mode:o})}this.settingsLoaded=!0},getHighlightedPoint:function(){for(var e=null,t=0;t<=this.gameBoardItemsNumb-1;t++)if(1==this.gameBoardItems[t].highlight){e=this.gameBoardItems[t];break}return e},getOpenPoints:function(){for(var e=[],t=0;t<=this.gameBoardItemsNumb-1;t++)null==this.gameBoardItems[t].state&&e.push(this.gameBoardItems[t].id);return e},calculatePointPlace:function(){var e,t=this.getOpenPoints(),a=1;return e=Math.floor(Math.random()*this.gameBoardItemsNumb)+a,!!t.length&&(t.includes(e)?e:this.calculatePointPlace())},gameRowClick:function(e,t){t.preventDefault();var a=this.gameBoardItems[e-1],s=this.getHighlightedPoint();if(this.gameBoardLocked||!s)return!1;1==a.highlight?a.state="win":s.state="miss",this.interruptPointShow()},interruptPointShow:function(){clearTimeout(this.finishShowPointInterval),clearTimeout(this.showPointInterval),this.renderPointResult()},renderPointsShow:function(){var e=this;this.gameBoardLocked=!1,this.showPointInterval=setTimeout((function(){var t=e.calculatePointPlace();if(t){var a=e.gameBoardItems[t-1];a.highlight=!0,e.finishShowPointInterval=setTimeout((function(){e.gameBoardLocked=!0,e.renderPointResult()}),e.dessapearPointDelay)}else e.renderResultMessage()}),this.highlightPointDelay)},renderPointResult:function(){var e=this.getHighlightedPoint();e.highlight=!1,"win"!=e.state&&(e.state="miss");var t=this.getGameResults();t.finished?(this.renderResultMessage(),this.saveResults(t.winner)):this.renderPointsShow()},getGameResults:function(){for(var e=[],t=[],a=Math.floor(this.gameBoardItemsNumb/2),s=0;s<=this.gameBoardItemsNumb-1;s++)null!=this.gameBoardItems[s].state&&("win"==this.gameBoardItems[s].state?t.push(this.gameBoardItems[s].id):e.push(this.gameBoardItems[s].id));return{finished:e.length>=a||t.length>=a,winner:t.length>=a?"user":"computer"}},generatePointsData:function(){this.gameBoardItems=[];for(var e=0;e<=this.gameBoardItemsNumb-1;e++)this.gameBoardItems.push({id:e+1,highlight:!1,state:null})},renderResultMessage:function(){var e=this.getGameResults();this.showResult=!0,this.gameInProcess=!1,"computer"==e.winner?this.resultsMessage="Computer win":this.resultsMessage=this.userName+" win"},getFormattedDate:function(){var e=["January","February","March","April","May","June","July","August","September","October","November","December"],t=new Date,a=t.getHours(),s=t.getMinutes(),i=e[t.getMonth()];return a=a<10?"0"+a:a,s=s<10?"0"+s:s,a+":"+s+"; "+t.getDate()+" "+i+" "+t.getFullYear()},saveResults:function(e){var t=this.getFormattedDate(),a="user"==e?this.userName:"Computer";l.a.post("https://starnavi-frontend-test-task.herokuapp.com/winners",{winner:a,date:t})}}},S=M,_=(a("034f"),Object(c["a"])(S,i,r,!1,null,null,null)),B=_.exports;s["a"].config.productionTip=!1,new s["a"]({render:function(e){return e(B)}}).$mount("#app")},"85ec":function(e,t,a){}});
//# sourceMappingURL=app.526b9f90.js.map